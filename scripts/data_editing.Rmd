---
pagetitle: "Data Editing"
output: 
  html_document:
    toc: true
    toc_float: true
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "../output") 
  })
---

```{r packages data editing, include=FALSE}
# Package names
packages <- c("dplyr", "haven","lubridate","ggplot2")

# Install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
  install.packages(packages[!installed_packages])
}

# Packages loading
invisible(lapply(packages, library, character.only = TRUE))
```


First, we read in the main data set. 

```{r}

data<-read_dta(
  "../data/AIRBNB_Houseprices.dta",
  encoding = NULL,
  col_select = NULL,
  skip = 0,
  n_max = Inf,
  .name_repair = "unique"
)
```

Transform data to factors, ordered etc., so that it can be properly read.
Take log size and price, because sizes are hugely skewed
```{r}
data$parking<-factor(data$parking)
data$pc4<-factor(data$pc4)
data$wtype<-factor(data$wtype)
data$construction_period<-factor(data$construction_period)
data$monumentalstatus<-factor(data$monumentalstatus)
data$buyerpaysorfree<-factor(data$buyerpaysorfree)
data$quality<-ordered(data$quality)
data$construction_period<-ordered(data$construction_period)
data$sales_date<-ymd(data$sales_date)
data$lprice <- log(data$price)
data$lsize <- log(data2$size)
```


Descriptive plots

```{r}
ggplot(data = data2, aes(x= sales_year, y = lprice)) +
  geom_boxplot()+
  theme_bw()+
  labs(y= "Log Price", x = "Year" )+
  theme(text=element_text(family="serif"))
```




